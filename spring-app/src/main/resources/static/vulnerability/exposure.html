<html>
<body>
<h2>Articles</h2>
<div id="articles"></div>
<hr>
<h4 id="title"></h4>
<div id="text"></div>
<div><b>Published on</b> <span id="date"></span></div>
<h3>Comments</h3>
<div id="comments"></div>

<script type="text/javascript">
    fetch('/api/vulnerability/articles')
        .then((response) => response.json())
        .then((data) => {
            document.getElementById('articles').innerHTML=data.map(r=>`<div><b><a href="javascript:show(${r.id})">${r.title}</a></b></div>`).join("");
        })
    ;
    function show(id) {
        fetch('/api/vulnerability/articles/'+id)
            .then((response) => response.json())
            .then((data) => {
                document.getElementById('title').innerText=data.title;
                document.getElementById('text').innerText=data.text;
                document.getElementById('date').innerText=data.date;
                document.getElementById('comments').innerHTML=data.comments.map(c=>
                    `<div><b>${c.author.name}</b> said <i>${c.text}</i></div>`
                        ).join("");
            })
        ;
    }
</script>

</body>
</html>
