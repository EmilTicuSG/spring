<html>
<body>
<h2>Blog Articles</h2>
<div id="articles" style="border: 3px solid green"></div>
<hr>
<h4 id="title"></h4>
Body:
<div id="text"></div>
<hr>
<div><i>Published on</i> <span id="date"></span></div>
<h3>Comments</h3>
<div id="comments"></div>

<script type="text/javascript">
    fetch('/api/vulnerability/articles')
        .then((response) => response.json())
        .then((data) => {
            document.getElementById('articles').innerHTML=
                "<ul>" +
                data.map(r=>`<li><b><a href="javascript:show(${r.id})">${r.title}</a></b></li>`).join("")
                +"</ul>";
        })
    ;
    function show(id) {
        fetch('/api/vulnerability/articles/'+id)
            .then((response) => response.json())
            .then((data) => {
                document.getElementById('title').innerText="Title: "+data.title;
                document.getElementById('text').innerText=data.text;
                document.getElementById('date').innerText=data.date;
                document.getElementById('comments').innerHTML=data.comments.map(c=>
                    `<div><b>${c.author.name}</b> said <i>${c.text}</i></div>`
                        ).join("");
            })
        ;
    }
</script>

</body>
</html>
