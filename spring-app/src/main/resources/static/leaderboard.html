<html>

<head>
    <link href="toastr.min.css" rel="stylesheet"/>
    <script type="text/javascript" src="jquery-1.12.2.min.js"></script>
    <script type="text/javascript" src="toastr.min.js"></script>
</head>

<body>
<h2>Leaderboard</h2>
<div id="leaderboard"></div>


<script type="text/javascript">
    function serverRoot() {
        return window.location.pathname.substring(0, window.location.pathname.indexOf("/", 2));
    }

    fetch(serverRoot() + '/api/leaderboard?page=1&size=50')
        .then((response) => response.json())
        .then((data) => {
            userId = data.id;
            document.getElementById('leaderboard').innerHTML =
                "<ol>"
                + data.content.map(e=>`<li> ${e.name}......${e.points} points </li>`).join("")
                +"</ol>";
        });

    function update() {
        fetch(serverRoot() + '/player/details', {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json'
                // 'Content-Type': 'application/x-www-form-urlencoded',
            },
            body: JSON.stringify({
                fullName: document.getElementById("fullName").value,
                country: document.getElementById("country").value
            })
        })
            .then((response) => response.json())
            .then((data) => {
                toastr.success("Profile updated")
            })
    }
</script>

</body>
</html>
